@* @model AppointmentSystem.Models.ViewModels.AppointmentModels.IndexVM *@

@{
    Layout = "~/Views/Shared/CustomerLayout.cshtml";
    ViewData["Title"] = "Home Page";
}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<style>
    .calendar-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
    }

    .calendar-table {
        width: 100%;
        table-layout: fixed;
    }

    .calendar-day {
        height: 50px;
        border: 1px solid #ddd;
        padding: 0.5rem;
        cursor: pointer;
    }

</style>

<div class="container mt-5">
    <div class="calendar-header">
        <button id="prevMonth" class="btn btn-primary">上個月</button>
        <h2 id="monthYear"></h2>
        <button id="nextMonth" class="btn btn-primary">下個月</button>
    </div>
    <table class="calendar-table table table-bordered">
        <thead>
            <tr style="background-color:#ddd;">
                <th>星期日</th>
                <th>星期一</th>
                <th>星期二</th>
                <th>星期三</th>
                <th>星期四</th>
                <th>星期五</th>
                <th>星期六</th>
            </tr>
        </thead>
        <tbody id="calendarBody">
            <!-- 月曆內容會由JavaScript動態生成 -->
        </tbody>
    </table>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    $(document).ready(function () {
        let today = new Date();
        let currentMonth = today.getMonth();
        let currentYear = today.getFullYear();

        const monthNames = ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"];

        function generateCalendar(month, year) {
            let firstDay = (new Date(year, month)).getDay();
            let daysInMonth = 32 - new Date(year, month, 32).getDate();
            let calendarBody = $("#calendarBody");
            calendarBody.empty();
            $("#monthYear").text(`${monthNames[month]} ${year}`);

            let date = 1;
            for (let i = 0; i < 6; i++) {
                let row = $("<tr onclick='test(" + i + ");'></tr>");
                let detail = $("<tr id='d-" + i + "' style='display:none;height:150px;'></tr>");

                for (let j = 0; j < 7; j++) {
                    if (i === 0 && j < firstDay) {
                        row.append($("<td></td>"));
                        detail.append($("<td></td>"));
                    } else if (date > daysInMonth) {
                        break;
                    } else {
                        let cell = $("<td class='calendar-day'></td>").text(date);
                        let dd = $("<td class='calendar-day'></td>").text("date:早");

                        row.append(cell);
                        detail.append(dd);
                        date++;
                    }
                }

                calendarBody.append(row);
                calendarBody.append(detail);
            }
        }

        $("#prevMonth").click(function () {
            currentYear = (currentMonth === 0) ? currentYear - 1 : currentYear;
            currentMonth = (currentMonth === 0) ? 11 : currentMonth - 1;
            generateCalendar(currentMonth, currentYear);
        });

        $("#nextMonth").click(function () {
            currentYear = (currentMonth === 11) ? currentYear + 1 : currentYear;
            currentMonth = (currentMonth + 1) % 12;
            generateCalendar(currentMonth, currentYear);
        });

        generateCalendar(currentMonth, currentYear);


    });

    function test(i) {
        if (document.getElementById("d-" + i).style.display == "")
            document.getElementById("d-" + i).style.display = "none";
        else
            document.getElementById("d-" + i).style.display = "";
    }
</script>